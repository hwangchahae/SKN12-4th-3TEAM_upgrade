# 🖥️ GitHub 기반 코드 분석 챗봇 프로젝트 요구사항 정의서

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![Flask](https://img.shields.io/badge/Flask-3.1.1-green.svg)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4-orange.svg)
![ChromaDB](https://img.shields.io/badge/ChromaDB-1.0.11-purple.svg)
![Status](https://img.shields.io/badge/Status-완료-brightgreen.svg)

## 📋 프로젝트 개요

> [!NOTE]
> **SK Networks Family AI 캠프 4차 프로젝트**  
> 최신 AI 기술을 활용한 혁신적인 코드 분석 챗봇 시스템

### 🏷️ 1.1 프로젝트 기본 정보

| 항목 | 내용 |
|------|------|
| **프로젝트명** | **GitHub 기반 코드 분석 챗봇** |
| **개발팀** | **떡잎마을 방범대대** (김이경, 노명구, 지상원, 허한결, 황차해) |
| **프로젝트 분류** | **SK Networks Family AI 캠프 4차 단위 프로젝트 3팀** |
| **개발 기간** | **2025년 6월 26일 - 2025년 6월 27일일** |
| **개발 언어** | **Python, JavaScript, HTML/CSS** |
| **주요 프레임워크** | **Flask, OpenAI GPT, ChromaDB, LangChain** |

### 🎯 1.2 프로젝트 목적 및 배경

> [!WARNING]
> **현재 AI 도구들의 한계점**  
> ChatGPT와 같은 AI 도구들은 GitHub 저장소에 대한 구체적인 정보 제공에 한계가 있습니다.

현재 상황:

1. **🚫 구조 파악 한계**: GitHub 저장소의 구조를 정확히 알지 못함
2. **❓ 기능 위치 불명**: 특정 기능이 어떤 파일에 있는지 부정확한 정보 제공
3. **⏱️ 번거로운 코드 분석**: 코드 파악을 위해 각 파일을 개별적으로 다운로드하여 입력해야 함

> [!TIP]
> **우리의 솔루션**  
> **GitHub 저장소 URL만 입력하면 해당 저장소에 대한 질문에 답변하고 코드 수정까지 가능한 AI 챗봇**을 개발하였습니다.

## 📊 기능 요구사항

> [!IMPORTANT]
> **핵심 기능 25개 요구사항 모두 구현 완료**  
> 채팅시스템, 저장소 분석, 코드 수정, 사용자 인증, 세션 관리 전 영역 커버

### ⚙️ 2.1 핵심 기능 (FR: Functional Requirements)

| 요구사항 ID | 분류 | 기능명 | 설명 | 우선순위 | 구현상태 |
|-------------|------|-------|------|----------|----------|
| **FR-CHAT-001** | 💬 **채팅시스템** | **사용자 질의** | 사용자가 GitHub 저장소에 대한 질문 입력 | 🔥 **높음** | ✅ **구현완료** |
| **FR-CHAT-002** | 💬 **채팅시스템** | **AI 응답** | AI가 분석결과 기반 답변 생성 | 🔥 **높음** | ✅ **구현완료** |
| **FR-CHAT-003** | 💬 **채팅시스템** | **채팅 이력 관리** | 채팅 세션별 대화 이력 저장/조회 | 🔥 **높음** | ✅ **구현완료** |
| **FR-CHAT-004** | 💬 **채팅시스템** | **질의 응답 맥락** | 사용자 질의 맥락을 고려한 구조화 답변 | ⚡ **중간** | ✅ **구현완료** |
| **FR-CHAT-005** | 💬 **채팅시스템** | **대화 기억** | 이전 대화 내용 기억 및 맥락 유지 | ⚡ **중간** | ✅ **구현완료** |
| **FR-REPO-001** | 📊 **저장소 분석** | **GitHub 연동** | GitHub API를 통한 저장소 정보 수집 | 🔥 **높음** | ✅ **구현완료** |
| **FR-REPO-002** | 📊 **저장소 분석** | **코드 파싱** | 코드 파일을 청크 단위로 분할 및 분석 | 🔥 **높음** | ✅ **구현완료** |
| **FR-REPO-003** | 📊 **저장소 분석** | **임베딩 생성** | 코드 청크를 벡터로 변환하여 ChromaDB에 저장 | ⚡ **중간** | ✅ **구현완료** |
| **FR-REPO-004** | 📊 **저장소 분석** | **메타데이터 추출** | 파일명, 함수명, 클래스명, 복잡도 등 메타데이터 생성 | ⚡ **중간** | ✅ **구현완료** |
| **FR-REPO-005** | 📊 **저장소 분석** | **브랜치 관리** | 다양한 브랜치의 코드 분석 지원 | ⚡ **중간** | ✅ **구현완료** |
| **FR-REPO-006** | 📊 **저장소 분석** | **파일 트리 뷰** | 저장소의 디렉토리 구조 시각화 | ⚡ **중간** | ✅ **구현완료** |
| **FR-REPO-007** | 📊 **저장소 분석** | **실시간 분석** | 저장소 분석 진행 상황 실시간 표시 | 💤 **낮음** | ✅ **구현완료** |
| **FR-CODE-001** | 🔧 **코드 수정** | **수정 제안** | AI가 코드 개선 사항 제안 | ⚡ **중간** | ✅ **구현완료** |
| **FR-CODE-002** | 🔧 **코드 수정** | **변경 미리보기** | 코드 변경 사항을 적용 전에 미리보기 제공 | ⚡ **중간** | ✅ **구현완료** |
| **FR-CODE-003** | 🔧 **코드 수정** | **Git 연동** | 변경사항을 Git 커밋 및 GitHub 푸시 | ⚡ **중간** | ✅ **구현완료** |
| **FR-CODE-004** | 🔧 **코드 수정** | **변경 이력** | 코드 변경 내역 추적 및 관리 | ⚡ **중간** | ✅ **구현완료** |
| **FR-AUTH-001** | 🔐 **사용자 인증** | **회원가입** | 이메일 기반 일반 회원가입 | 🔥 **높음** | ✅ **구현완료** |
| **FR-AUTH-002** | 🔐 **사용자 인증** | **로그인** | 이메일/패스워드 기반 로그인 | 🔥 **높음** | ✅ **구현완료** |
| **FR-AUTH-003** | 🔐 **사용자 인증** | **GitHub OAuth** | GitHub 계정으로 로그인 | 🔥 **높음** | ✅ **구현완료** |
| **FR-AUTH-004** | 🔐 **사용자 인증** | **Google OAuth** | Google 계정으로 로그인 | 🔥 **높음** | ✅ **구현완료** |
| **FR-AUTH-005** | 🔐 **사용자 인증** | **세션 관리** | 로그인 상태 유지 및 자동 로그아웃 | 🔥 **높음** | ✅ **구현완료** |
| **FR-SESSION-001** | ⚙️ **세션 관리** | **세션 생성** | 저장소별 채팅 세션 생성 | 🔥 **높음** | ✅ **구현완료** |
| **FR-SESSION-002** | ⚙️ **세션 관리** | **세션 관리** | 세션명 변경, 순서 조정, 삭제 | ⚡ **중간** | ✅ **구현완료** |
| **FR-SESSION-003** | ⚙️ **세션 관리** | **세션 내보내기** | 채팅 내용을 마크다운으로 내보내기 | 💤 **낮음** | ✅ **구현완료** |
| **FR-SESSION-004** | ⚙️ **세션 관리** | **컨텍스트 정리** | 메모리 사용량 최적화를 위한 컨텍스트 정리 | 💤 **낮음** | ✅ **구현완료** |

### 🔐 2.2 비기능 요구사항 (NFR: Non-Functional Requirements)

> [!NOTE]
> **보안, 성능, 확장성, 신뢰성** 4개 영역 9개 요구사항 모두 구현 완료

| 요구사항 ID | 분류 | 요구사항명 | 설명 | 우선순위 | 구현상태 |
|-------------|------|------------|------|----------|----------|
| **NFR-SEC-001** | 🛡️ **보안** | **사용자 인증** | GitHub OAuth, Google OAuth, 일반 회원가입/로그인 지원 | 🔥 **높음** | ✅ **구현완료** |
| **NFR-SEC-002** | 🛡️ **보안** | **토큰 암호화** | GitHub 토큰 암호화 저장 | 🔥 **높음** | ✅ **구현완료** |
| **NFR-SEC-003** | 🛡️ **보안** | **세션 관리** | Flask 세션 기반 사용자 상태 관리 | 🔥 **높음** | ✅ **구현완료** |
| **NFR-PER-001** | ⚡ **성능** | **임베딩 처리** | 대용량 코드 파일 청크 단위 임베딩 처리 | ⚡ **중간** | ✅ **구현완료** |
| **NFR-PER-002** | ⚡ **성능** | **벡터 검색** | ChromaDB 기반 빠른 유사도 검색 | ⚡ **중간** | ✅ **구현완료** |
| **NFR-SCL-001** | 📈 **확장성** | **데이터베이스** | MySQL 기반 확장 가능한 데이터 관리 | ⚡ **중간** | ✅ **구현완료** |
| **NFR-SCL-002** | 📈 **확장성** | **클라우드 배포** | AWS 배포 지원 | ⚡ **중간** | ✅ **구현완료** |
| **NFR-REL-001** | 🔒 **신뢰성** | **에러 처리** | 포괄적인 예외 처리 및 에러 로깅 | 🔥 **높음** | ✅ **구현완료** |
| **NFR-REL-002** | 🔒 **신뢰성** | **백업 복구** | 데이터베이스 백업 및 복구 기능 | ⚡ **중간** | ✅ **구현완료** |

## 🏗️ 시스템 아키텍처 요구사항

> [!TIP]
> **마이크로서비스 기반 아키텍처**  
> 컴포넌트별 역할 분리 및 확장 가능한 시스템 설계

### 🔧 3.1 전체 시스템 구조

```
┌─────────────┐    GitHub URL 입력    ┌─────────────────┐
│   사용자     │ ──────────────────── │ Flask 웹서버     │
└─────────────┘                      └─────────────────┘
                                              │
                    ┌─────────────────────────┼─────────────────────────┐
                    │                         │                         │
                    ▼                         ▼                         ▼
            ┌─────────────┐          ┌─────────────────┐        ┌─────────────────┐
            │ GitHub API  │          │ OpenAI GPT API  │        │ ChromaDB 벡터DB │
            └─────────────┘          └─────────────────┘        └─────────────────┘
                    │                         │                         ▲
                    ▼                         ▼                         │
            ┌─────────────┐          ┌─────────────────┐                │
            │GitHub 분석기 │          │   채팅 핸들러    │ ───────────────┘
            └─────────────┘          └─────────────────┘
                    │                         │
                    ▼                         ▼
            ┌─────────────┐          ┌─────────────────┐
            │임베딩 생성기 │          │ MySQL 데이터베이스│
            └─────────────┘          └─────────────────┘
                    │                         ▲
                    └─────────────────────────┘

[코어 컴포넌트]
- GitHub 분석기: 저장소 클론 및 파일 파싱
- 임베딩 생성기: 코드 청크 벡터화
- 채팅 핸들러: 질의 처리 및 답변 생성
```

### ⚙️ 3.2 주요 컴포넌트 요구사항

| 컴포넌트 | 역할 | 기술 스택 | 핵심 기능 |
|----------|------|----------|----------|
| **🌐 웹 서버** | 사용자 인터페이스 제공 | Flask, HTML/CSS/JS | 라우팅, 템플릿 렌더링, 세션 관리 |
| **📊 GitHub 분석기** | 저장소 분석 및 데이터 추출 | GitPython, GitHub API | 저장소 클론, 파일 파싱, 메타데이터 생성 |
| **🧠 임베딩 엔진** | 코드 벡터화 | OpenAI Embeddings, ChromaDB | 코드 청크 임베딩, 벡터 저장 |
| **💬 채팅 엔진** | 대화 처리 | OpenAI GPT, LangChain | 질의 처리, 답변 생성, 컨텍스트 관리 |
| **💾 데이터베이스** | 데이터 영속성 | MySQL, PyMySQL | 사용자 정보, 채팅 이력, 세션 데이터 |

## 🖥️ 사용자 인터페이스 요구사항

> [!IMPORTANT]
> **반응형 웹 디자인**  
> 모바일, 태블릿, 데스크톱 모든 디바이스 지원

### 📱 4.1 웹 페이지 구성

| 페이지명 | 경로 | 주요 기능 | 접근 권한 |
|----------|------|----------|----------|
| **🏠 랜딩 페이지** | **`/`** | 프로젝트 소개, 로그인 유도 | 🔓 비로그인 사용자 |
| **🔑 로그인 페이지** | **`/login`** | 일반/GitHub/Google 로그인 | 🔓 비로그인 사용자 |
| **📝 회원가입 페이지** | **`/signup`** | 새 계정 생성 | 🔓 비로그인 사용자 |
| **📊 메인 대시보드** | **`/index`** | 저장소 목록, 분석 시작 | 🔐 로그인 사용자 |
| **💬 채팅 페이지** | **`/chat/<session_id>`** | AI 채팅, 코드 분석 | 🔐 로그인 사용자 |
| **👤 프로필 페이지** | **`/profile`** | 사용자 정보 관리 | 🔐 로그인 사용자 |

### 4.2 UI/UX 요구사항

| 요구사항 | 설명 | 구현 방법 |
|----------|------|----------|
| **📱 반응형 디자인** | 모바일/태블릿/데스크톱 지원 | `Tailwind CSS` |
| **🌙 다크 테마** | 개발자 친화적 어두운 테마 | 기본 다크 모드 적용 |
| **⚡ 실시간 채팅** | 실시간 메시지 표시 | `JavaScript AJAX` |
| **🎨 코드 하이라이팅** | 코드 블록 문법 강조 | `Highlight.js` |
| **⏳ 로딩 인디케이터** | 분석 진행 상태 표시 | `CSS 애니메이션` |

## 🔌 API 설계 및 명세서

> [!NOTE]
> **RESTful API 설계**  
> 30개 이상의 체계적으로 설계된 API 엔드포인트 제공

### 🌐 5.1 RESTful API 엔드포인트

#### 🔐 5.1.1 인증 관련 API

| HTTP 메서드 | 엔드포인트 | 설명 | 요청 파라미터 | 응답 형식 |
|-------------|------------|------|---------------|----------|
| `POST` | **`/login`** | 일반 로그인 | `username`, `password` | 세션 쿠키 설정 |
| `GET` | **`/login/github`** | GitHub OAuth 시작 | - | GitHub 인증 페이지로 리다이렉트 |
| `GET` | **`/github/callback`** | GitHub OAuth 콜백 | `code` | 세션 설정 후 메인으로 리다이렉트 |
| `GET` | **`/login/google`** | Google OAuth 시작 | - | Google 인증 페이지로 리다이렉트 |
| `GET` | **`/google/callback`** | Google OAuth 콜백 | `code` | 세션 설정 후 메인으로 리다이렉트 |
| `POST` | **`/signup`** | 회원가입 | `username`, `email`, `password` | 성공/실패 메시지 |
| `GET` | **`/logout`** | 로그아웃 | - | 세션 삭제 후 랜딩으로 리다이렉트 |

#### 📊 5.1.2 저장소 분석 API

| HTTP 메서드 | 엔드포인트 | 설명 | 요청 파라미터 | 응답 형식 |
|-------------|------------|------|---------------|----------|
| `POST` | **`/analyze`** | 저장소 분석 시작 | `repo_url`, `token` (선택) | Server-Sent Events 스트림 |
| `GET` | **`/api/branches/<session_id>`** | 브랜치 목록 조회 | - | JSON: `{success, branches}` |
| `GET` | **`/api/files/<session_id>/<branch_name>`** | 파일 트리 조회 | - | JSON: `{success, tree}` |
| `GET` | **`/api/file-content/<session_id>/<branch>/<path>`** | 파일 내용 조회 | - | JSON: `{success, content}` |

#### 💬 5.1.3 채팅 관련 API

| HTTP 메서드 | 엔드포인트 | 설명 | 요청 파라미터 | 응답 형식 |
|-------------|------------|------|---------------|----------|
| `GET` | **`/chat/<session_id>`** | 채팅 페이지 렌더링 | - | HTML 템플릿 |
| `POST` | **`/chat`** | 채팅 메시지 전송 | `session_id`, `message` | JSON: `{answer, error}` |
| `GET` | **`/get_chat_history`** | 채팅 이력 조회 | `session_id` | JSON: `{history}` |
| `POST` | **`/new-chat`** | 새 채팅 세션 생성 | `repo_url` | JSON: `{session_id}` |
| `GET` | **`/chat-sessions`** | 채팅 세션 목록 | `repo_url` | JSON: `{sessions}` |

#### 🔧 5.1.4 코드 수정 관련 API

| HTTP 메서드 | 엔드포인트 | 설명 | 요청 파라미터 | 응답 형식 |
|-------------|------------|------|---------------|----------|
| `POST` | **`/modify_request`** | 코드 수정 요청 | `session_id`, `message` | JSON: `{file_name, old_code, new_code}` |
| `POST` | **`/apply_changes`** | 코드 변경 적용 | `session_id`, `file_name`, `new_content` | JSON: `{success, message}` |
| `POST` | **`/check_push_intent`** | GitHub 푸시 의도 확인 | `message` | JSON: `{intent}` |
| `POST` | **`/push_to_github`** | GitHub에 푸시 | `session_id`, `file_name`, `new_content`, `commit_msg` | JSON: `{success, message}` |
| `POST` | **`/apply_local`** | 로컬에만 적용 | `session_id`, `file_name`, `new_content` | JSON: `{success, message}` |

#### ⚙️ 5.1.5 세션 관리 API

| HTTP 메서드 | 엔드포인트 | 설명 | 요청 파라미터 | 응답 형식 |
|-------------|------------|------|---------------|----------|
| `POST` | **`/rename-chat-session`** | 세션명 변경 | `session_id`, `new_name` | JSON: `{success, message}` |
| `POST` | **`/reorder-chat-session`** | 세션 순서 변경 | `session_id`, `reference_session_id`, `position` | JSON: `{success, message}` |
| `POST` | **`/delete-chat-session`** | 세션 삭제 | `session_id` | JSON: `{success, message}` |
| `POST` | **`/export-chat-md`** | 채팅 내용 마크다운 내보내기 | `session_id` | 파일 다운로드 |
| `POST` | **`/cleanup-chat-context`** | 채팅 컨텍스트 정리 | `session_id` | JSON: `{success, message}` |

### 📝 5.2 API 응답 형식

> [!IMPORTANT]
> **일관성 있는 API 응답 형식**  
> 모든 API는 JSON 형태로 응답하며, 성공/실패 상태와 메시지를 포함합니다.

#### ✅ 5.2.1 성공 응답

```json
{
  "success": true,
  "data": {
    // 요청에 따른 데이터
  },
  "message": "요청이 성공적으로 처리되었습니다."
}
```

#### 5.2.2 에러 응답

```json
{
  "success": false,
  "error": "error_code",
  "message": "에러 설명",
  "details": {
    // 추가 에러 정보
  }
}
```

### 5.3 API 인증 및 보안

| 보안 요소 | 구현 방법 | 설명 |
|-----------|----------|------|
| **세션 기반 인증** | Flask Session | 로그인 후 세션 쿠키로 사용자 식별 |
| **CSRF 보호** | CSRF 토큰 | 폼 전송 시 CSRF 토큰 검증 |
| **입력 검증** | 서버사이드 검증 | 모든 입력값에 대한 유효성 검사 |
| **GitHub 토큰 암호화** | Fernet 암호화 | 사용자 GitHub 토큰 암호화 저장 |

## 🗄️ 데이터베이스 설계

### 6.1 ERD (Entity Relationship Diagram)

```
┌─────────────────────────────────────────────────────────────┐
│                        USERS                                │
├─────────────────────────────────────────────────────────────┤
│ • id (PK)                    • is_google_user               │
│ • username                   • google_id                    │
│ • email (UNIQUE)             • google_username              │
│ • password_hash              • google_token                 │
│ • is_github_user             • google_avatar_url            │
│ • github_id                  • created_at                   │
│ • github_username            • last_login                   │
│ • github_token               │                              │
│ • github_avatar_url          │                              │
└─────────────────┬───────────────────────────────────────────┘
                  │ 1:N (owns)
                  ▼
┌─────────────────────────────────────────────────────────────┐
│                      SESSIONS                              │
├─────────────────────────────────────────────────────────────┤
│ • id (PK)                    • name                         │
│ • session_id (UNIQUE)        • display_order                │
│ • user_id (FK)               • files_data                   │
│ • repo_url                   • directory_structure          │
│ • token                      • created_at                   │
└─────────────────┬───────────────────┬───────────────────────┘
                  │ 1:N (contains)    │ 1:N (tracks)
                  ▼                   ▼
┌─────────────────────────────┐ ┌─────────────────────────────┐
│        CHAT_HISTORY         │ │        CODE_CHANGES         │
├─────────────────────────────┤ ├─────────────────────────────┤
│ • id (PK)                   │ │ • id (PK)                   │
│ • session_id (FK)           │ │ • session_id (FK)           │
│ • role                      │ │ • file_name                 │
│ • content                   │ │ • old_code                  │
│ • timestamp                 │ │ • new_code                  │
└─────────────────────────────┘ │ • commit_hash               │
                                │ • timestamp                 │
                                └─────────────────────────────┘

관계 설명:
- users (1) : sessions (N) - 한 사용자는 여러 세션을 가질 수 있음
- sessions (1) : chat_history (N) - 한 세션은 여러 채팅 기록을 가질 수 있음  
- sessions (1) : code_changes (N) - 한 세션은 여러 코드 변경 기록을 가질 수 있음
```

### 6.2 테이블 정의서

#### 6.2.1 users 테이블

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
|--------|-------------|-----------|------|
| `id` | INT | PRIMARY KEY, AUTO_INCREMENT | 사용자 고유 ID |
| `username` | VARCHAR(255) | NOT NULL | 사용자명 |
| `email` | VARCHAR(255) | UNIQUE | 이메일 주소 |
| `password_hash` | VARCHAR(255) | NULL | 암호화된 비밀번호 |
| `is_github_user` | BOOLEAN | DEFAULT FALSE | GitHub 로그인 사용자 여부 |
| `github_id` | VARCHAR(255) | NULL | GitHub 사용자 ID |
| `github_username` | VARCHAR(255) | NULL | GitHub 사용자명 |
| `github_token` | VARCHAR(255) | NULL | GitHub 액세스 토큰 |
| `github_avatar_url` | VARCHAR(255) | NULL | GitHub 프로필 이미지 URL |
| `is_google_user` | BOOLEAN | DEFAULT FALSE | Google 로그인 사용자 여부 |
| `google_id` | VARCHAR(255) | NULL | Google 사용자 ID |
| `google_username` | VARCHAR(255) | NULL | Google 사용자명 |
| `google_token` | VARCHAR(255) | NULL | Google 액세스 토큰 |
| `google_avatar_url` | VARCHAR(255) | NULL | Google 프로필 이미지 URL |
| `created_at` | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 계정 생성일 |
| `last_login` | TIMESTAMP | NULL | 마지막 로그인 시간 |

#### 6.2.2 sessions 테이블

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
|--------|-------------|-----------|------|
| `id` | INT | PRIMARY KEY, AUTO_INCREMENT | 세션 고유 ID |
| `session_id` | VARCHAR(255) | NOT NULL, UNIQUE | 세션 식별자 |
| `user_id` | INT | NOT NULL, FOREIGN KEY | 사용자 ID |
| `repo_url` | VARCHAR(255) | NULL | GitHub 저장소 URL |
| `token` | VARCHAR(255) | NULL | 암호화된 GitHub 토큰 |
| `name` | VARCHAR(255) | NULL | 세션 이름 |
| `display_order` | INT | DEFAULT 0 | 표시 순서 |
| `files_data` | LONGTEXT | NULL | 분석된 파일 데이터 (JSON) |
| `directory_structure` | TEXT | NULL | 디렉토리 구조 |
| `created_at` | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 세션 생성일 |

#### 6.2.3 chat_history 테이블

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
|--------|-------------|-----------|------|
| `id` | INT | PRIMARY KEY, AUTO_INCREMENT | 채팅 메시지 고유 ID |
| `session_id` | VARCHAR(255) | NOT NULL, FOREIGN KEY | 세션 식별자 |
| `role` | VARCHAR(50) | NOT NULL | 메시지 역할 (user/assistant) |
| `content` | TEXT | NOT NULL | 메시지 내용 |
| `timestamp` | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 메시지 전송 시간 |

#### 6.2.4 code_changes 테이블

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
|--------|-------------|-----------|------|
| `id` | INT | PRIMARY KEY, AUTO_INCREMENT | 코드 변경 고유 ID |
| `session_id` | VARCHAR(255) | FOREIGN KEY | 세션 식별자 |
| `file_name` | TEXT | NULL | 변경된 파일명 |
| `old_code` | LONGTEXT | NULL | 변경 전 코드 |
| `new_code` | LONGTEXT | NULL | 변경 후 코드 |
| `commit_hash` | TEXT | NULL | Git 커밋 해시 |
| `timestamp` | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 변경 시간 |

## ⚙️ 기술 스택 및 의존성

### 7.1 백엔드 기술 스택

| 분류 | 기술/라이브러리 | 버전 | 용도 |
|------|----------------|------|------|
| **웹 프레임워크** | Flask | 3.1.1 | 웹 서버 및 API 엔드포인트 |
| **AI/ML** | OpenAI | 1.82.1 | GPT API 호출 |
| **벡터 데이터베이스** | ChromaDB | 1.0.11 | 임베딩 저장 및 검색 |
| **HTTP 클라이언트** | Requests | 2.32.3 | GitHub API 호출 |
| **Git 라이브러리** | GitPython | 3.1.44 | Git 저장소 조작 |
| **AI 프레임워크** | LangChain | 0.3.25 | 문서 처리 및 체인 구성 |
| **UI 프레임워크** | Bootstrap-Flask | 2.5.0 | UI 컴포넌트 |
| **환경 설정** | python-dotenv | 1.1.0 | 환경 변수 관리 |
| **암호화** | cryptography | 45.0.3 | 토큰 암호화 |
| **데이터베이스** | PyMySQL | latest | MySQL 연결 |
| **비밀번호 해싱** | bcrypt | latest | 비밀번호 암호화 |
| **토큰화** | tiktoken | 0.9.0 | 텍스트 토큰 계산 |
| **마크다운 처리** | markdown | 3.6 | 마크다운 파싱 |

### 7.2 프론트엔드 기술 스택

| 분류 | 기술/라이브러리 | 버전 | 용도 |
|------|----------------|------|------|
| **CSS 프레임워크** | Tailwind CSS | 2.2.19 | 스타일링 |
| **아이콘** | Material Icons | latest | 아이콘 표시 |
| **코드 하이라이팅** | Highlight.js | 11.9.0 | 코드 문법 강조 |
| **JavaScript** | Vanilla JS | ES6+ | 클라이언트 로직 |

### 7.3 인프라 및 배포

| 분류 | 기술/서비스 | 용도 |
|------|-------------|------|
| **클라우드 플랫폼** | AWS | 웹 애플리케이션 호스팅 |
| **데이터베이스** | GCP MySQL | 관계형 데이터 저장 |
| **컨테이너** | Docker | 애플리케이션 컨테이너화 |
| **웹 서버** | Gunicorn | WSGI 서버 |

## 🔄 데이터 플로우

### 8.1 저장소 분석 플로우

```
사용자        웹서버        GitHub API    분석엔진       ChromaDB     데이터베이스
  │             │              │            │             │             │
  │ GitHub URL  │              │            │             │             │
  │ ─────────►  │              │            │             │             │
  │             │ 저장소 정보   │            │             │             │
  │             │ ─────────────► │           │             │             │
  │             │              │ 저장소     │             │             │
  │             │ ◄───────────── │ 데이터     │             │             │
  │             │ 코드 분석     │            │             │             │
  │             │ ─────────────────────────► │             │             │
  │             │              │            │ 파일 파싱   │             │
  │             │              │            │ 및 청크생성 │             │
  │             │              │            │             │             │
  │             │              │            │ 임베딩 생성 │             │
  │             │              │            │ ───────────► │             │
  │             │              │            │ 및 저장     │             │
  │             │              │            │             │             │
  │             │              │            │ 메타데이터  │             │
  │             │              │            │ ─────────────────────────► │
  │             │              │            │ 저장        │             │
  │ 분석 완료   │              │            │             │             │
  │ ◄─────────  │              │            │             │             │
  │ 알림        │              │            │             │             │

단계별 설명:
1. 사용자가 GitHub 저장소 URL 입력
2. 웹서버가 GitHub API를 통해 저장소 정보 수집
3. 분석엔진이 코드 파일들을 파싱하고 청크 단위로 분할
4. 각 청크를 임베딩하여 ChromaDB에 저장
5. 파일 메타데이터를 MySQL 데이터베이스에 저장
6. 분석 완료 후 사용자에게 알림
```

### 8.2 채팅 처리 플로우

```
사용자     웹서버      ChromaDB    OpenAI API   데이터베이스   메모리시스템
  │          │            │            │            │            │
  │ 질문 입력 │            │            │            │            │
  │ ───────► │            │            │            │            │
  │          │ 유사 코드   │            │            │            │
  │          │ ─────────► │            │            │            │
  │          │           │ 관련 코드   │            │            │
  │          │ ◄───────── │ 청크 반환  │            │            │
  │          │ 이전 대화  │            │            │            │
  │          │ ─────────────────────────────────────────────────► │
  │          │           │            │            │           │ 관련 대화
  │          │ ◄───────────────────────────────────────────────── │ 내역 반환
  │          │ 컨텍스트와 │            │            │            │
  │          │ ─────────────────────► │            │            │
  │          │ 함께 질문 전송          │            │            │
  │          │           │           │ AI 답변     │            │
  │          │ ◄─────────────────────  │ 생성       │            │
  │          │ 대화 내역  │            │            │            │
  │          │ ─────────────────────────────────── │            │
  │          │ 저장       │            │            │            │
  │ 답변     │            │            │            │            │
  │ ◄────── │            │            │            │            │
  │ 표시     │            │            │            │            │

단계별 설명:
1. 사용자가 GitHub 저장소에 대한 질문 입력
2. 웹서버가 ChromaDB에서 질문과 유사한 코드 청크 검색
3. 메모리시스템에서 이전 대화 내역 조회
4. 코드 컨텍스트와 이전 대화를 포함하여 OpenAI API에 질문 전송
5. AI가 생성한 답변을 데이터베이스에 저장
6. 사용자에게 답변 표시
```

## 🚀 배포 및 운영 요구사항

### 9.1 환경 설정

#### 9.1.1 필수 환경 변수

| 변수명 | 설명 | 예시값 |
|--------|------|--------|
| `OPENAI_API_KEY` | OpenAI API 키 | `sk-...` |
| `GITHUB_CLIENT_ID` | GitHub OAuth 클라이언트 ID | `Iv1.a1b2c3d4...` |
| `GITHUB_CLIENT_SECRET` | GitHub OAuth 클라이언트 시크릿 | `abcd1234...` |
| `GOOGLE_CLIENT_ID` | Google OAuth 클라이언트 ID | `123456789...` |
| `GOOGLE_CLIENT_SECRET` | Google OAuth 클라이언트 시크릿 | `GOCSPX-...` |
| `DB_HOST` | MySQL 호스트 | `your-mysql-host` |
| `DB_USER` | MySQL 사용자명 | `your-username` |
| `DB_PASSWORD` | MySQL 비밀번호 | `your-password` |
| `DB_NAME` | MySQL 데이터베이스명 | `github_analyzer` |
| `DB_PORT` | MySQL 포트 | `3306` |
| `FLASK_SECRET_KEY` | Flask 세션 시크릿 키 | `your-secret-key` |
| `SERVER_NAME` | 서버 도메인 | `your-domain.com` |
| `PREFERRED_URL_SCHEME` | URL 스킴 | `http` 또는 `https` |

#### 9.1.2 OAuth 설정

| 플랫폼 | 콜백 URL | 필요 권한 |
|--------|----------|----------|
| **GitHub** | `http://your-domain.com/github/callback` | `repo`, `user` |
| **Google** | `http://your-domain.com/google/callback` | `openid`, `email`, `profile` |

### 9.2 성능 요구사항

| 항목 | 목표값 | 측정 방법 |
|------|--------|----------|
| **응답 시간** | < 3초 (일반 질의) | 웹 브라우저 네트워크 탭 |
| **분석 시간** | < 5분 (중간 규모 저장소) | 서버 로그 |
| **동시 사용자** | 50명 | 부하 테스트 |
| **메모리 사용량** | < 4GB | 시스템 모니터링 |

### 9.3 보안 요구사항

| 보안 항목 | 구현 방법 | 검증 방법 |
|-----------|----------|----------|
| **데이터 암호화** | Fernet 암호화 | 암호화된 토큰 저장 확인 |
| **SQL 인젝션 방지** | Parameterized Query | 코드 리뷰 |
| **XSS 방지** | HTML 이스케이핑 | 보안 스캔 |
| **CSRF 방지** | CSRF 토큰 | 폼 전송 테스트 |
| **세션 보안** | HTTPOnly, Secure 쿠키 | 브라우저 개발자 도구 |

## 📝 개발 가이드라인

### 10.1 코딩 표준

| 항목 | 규칙 | 예시 |
|------|------|------|
| **Python 코딩 스타일** | PEP 8 준수 | `snake_case`, 4스페이스 들여쓰기 |
| **함수명** | 동사_명사 형태 | `get_user_data()`, `create_session()` |
| **클래스명** | 파스칼 케이스 | `GitHubRepositoryFetcher` |
| **상수명** | 대문자 스네이크 케이스 | `TOP_K = 20` |
| **주석** | 한글 주석 권장 | `# 사용자 인증 확인` |

### 10.2 에러 처리

| 에러 유형 | 처리 방법 | 로깅 레벨 |
|-----------|----------|----------|
| **API 에러** | try-catch로 예외 처리 | ERROR |
| **네트워크 에러** | 재시도 로직 포함 | WARNING |
| **사용자 입력 에러** | 사용자 친화적 메시지 | INFO |
| **시스템 에러** | 스택 트레이스 로깅 | CRITICAL |

### 10.3 로깅 정책

| 로그 레벨 | 용도 | 예시 |
|-----------|------|------|
| **DEBUG** | 개발 디버깅 | `[DEBUG] 세션 데이터: {session_data}` |
| **INFO** | 일반 정보 | `[INFO] 사용자 로그인: {username}` |
| **WARNING** | 경고 사항 | `[WARNING] GitHub 토큰 만료` |
| **ERROR** | 에러 발생 | `[ERROR] 데이터베이스 연결 실패` |
| **CRITICAL** | 치명적 에러 | `[CRITICAL] 시스템 종료` |

## 📊 품질 보증

### 11.1 테스트 전략

| 테스트 유형 | 도구/방법 | 커버리지 목표 |
|-------------|----------|---------------|
| **단위 테스트** | pytest | 80% 이상 |
| **통합 테스트** | pytest + requests | 주요 API 엔드포인트 |
| **E2E 테스트** | Selenium | 핵심 사용자 플로우 |
| **부하 테스트** | Locust | 동시 사용자 50명 |

### 11.2 코드 품질 기준

| 기준 | 도구 | 임계값 |
|------|------|--------|
| **코드 복잡도** | McCabe | < 10 |
| **중복 코드** | 수동 리뷰 | < 5% |
| **코드 커버리지** | coverage.py | > 80% |
| **보안 취약점** | bandit | 0개 |

## 📚 문서화 요구사항

### 12.1 기술 문서

| 문서 유형 | 내용 | 대상 독자 |
|-----------|------|----------|
| **API 문서** | 엔드포인트 명세, 예제 | 개발자 |
| **설치 가이드** | 환경 설정, 배포 방법 | 운영자 |
| **사용자 매뉴얼** | 기능 사용법, FAQ | 사용자 |
| **코드 주석** | 함수/클래스 설명 | 개발자 |

### 12.2 운영 문서

| 문서 유형 | 내용 | 대상 독자 |
|-----------|------|----------|
| **운영 가이드** | 모니터링, 백업, 복구 | 운영자 |
| **장애 대응 매뉴얼** | 에러 코드별 대응 방법 | 운영자 |
| **성능 튜닝 가이드** | 최적화 방법 | 개발자/운영자 |

---

## 📋 결론

본 문서는 GitHub 기반 코드 분석 챗봇 프로젝트의 완전한 요구사항을 정의하고 있습니다. 

### 주요 성과

1. **완전한 RAG 시스템 구현**: GitHub 저장소 분석, 임베딩 생성, 벡터 검색을 통한 정확한 답변 제공
2. **직관적인 사용자 인터페이스**: 다크 테마, 반응형 디자인, 실시간 채팅 기능
3. **강력한 인증 시스템**: GitHub, Google OAuth 및 일반 로그인 지원
4. **확장 가능한 아키텍처**: 마이크로서비스 형태로 구성된 모듈형 설계
5. **클라우드 배포 지원**: AWS 및 GCP 환경에서의 안정적인 운영

### 기술적 혁신

- **의미 기반 코드 검색**: 단순 키워드가 아닌 의미 기반 코드 검색으로 정확도 향상
- **계층적 코드 분석**: 함수/클래스 단위 청크화로 구조적 이해 제공
- **실시간 코드 수정**: AI 제안을 통한 즉시 코드 수정 및 Git 연동
- **다중 컨텍스트 관리**: 이전 대화 기억 및 저장소별 컨텍스트 유지

이 시스템은 개발자들의 GitHub 저장소 이해를 돕고, AI 기반 코드 분석의 새로운 가능성을 제시하는 혁신적인 도구입니다.